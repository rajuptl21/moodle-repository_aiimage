{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template repository_aiimage/managecreds
    Simple template to manage credentials for the AI Image repository plugin. Expected context:
    {
        "apiuser": "testdevuser",
        "apisecret": "RQ6Sm3Ph1FsfHNipcdaTg",
        "element": {}
    }
}}
<div class="repository_aiimage_credsmanager">
    <!-- If API user then show a link + js to poke creds in -->
    {{#apiuser}}<a href="#" class="cloudpoodll_poke_creds">{{#str}}fillcredentials, repository_aiimage{{/str}}</a>{{/apiuser}}
    <!-- if no API user then the user sees a link to a page which will allow them to take a free trial -->
    {{^apiuser}}
        <a href="https://poodll.com/get-free-trial" target="_blank">{{#str}}getfreetrial, repository_aiimage{{/str}} [&#x2197;]</a>
    {{/apiuser}}
</div>
{{^element.frozen}}
    {{#js}}
        require(['jquery'],function($) {
            //set up fetch from elsewhere
            $(".repository_aiimage_credsmanager .cloudpoodll_poke_creds").on("click", function() {
                event.preventDefault();
                var apiuser = document.getElementById('id_apiuser');
                var apisecret = document.getElementById('id_apisecret');
                apiuser.value='{{{apiuser}}}';
                apisecret.value='{{{apisecret}}}';
            });
        });
    {{/js}}
{{/element.frozen}}